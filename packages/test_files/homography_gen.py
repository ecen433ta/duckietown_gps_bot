"""
This file will take the hard-coded homography points and measured values to generate a homography matrix for the cameras.
Matricies generated by this file are then used in the gps system.
"""

import cv2 as cv
import numpy as np
import json

x_y_pts_blue = np.array([[1.1811,0.5906],[1.77165,0.5906],[2.3622,0.5906],[2.9528,0.5906],
                         [1.77165,1.1811],[2.3622,1.77165],[2.95275,1.1811],[4.13385,1.77165],
                         [1.5211,1.57],[1.53,0.175],[3.38,0.888],[4.14,1.601],
                         [2.705,0.172],[2.135,0.405],[3.334,0.333],[3.138,0.878]])


u_v_pts_blue = np.array([[40.01638,502.3892],[257.6642,502.3893],[482.2087,499.1904],[933.1873,496.5773],
                         [263.7774,278.7438],[482.6008,63.83985],[702.8609,274.634],[1131.43,53.334],
                         [173.458,142.7266],[164.6325,648.11],[868.853,384.5199],[1133.342,119.6566],
                         [609.3866,664.0679],[391.1547,572.8396],[844.7417,595.703],[770.813,386.959]])


x_y_pts_red = np.array([[3.112,4.417],[3.753,4.432],[4.430,4.326],[4.456,3.812],
                        [4.407,3.192],[3.930,3.391],[3.489,3.138],[3.061,3.381],
                        [4.303,2.622],[4.534,2.077],[4.270,1.632]])

u_v_pts_red = np.array([[1168.961,87.534],[1192.703,340.489],[1162.862,611.537],[950.213,627.009],
                        [698.863,601.919],[770.639,416.112],[673.128,250.904],[761.896,88.844],
                        [484.079,559.198],[286.277,643.640],[135.408,541.252]])

x_y_pts_yellow = np.array([[2.667,3.265],[2.671,3.861],[2.683,4.464],[2.058,4.433],
                           [0.495,3.943],[0.958,3.917],[0.845,4.388],[1.478,4.338],
                           [0.457,3.651],[0.203,3.309],[0.416,3.029],[1.597,2.794],
                           [1.899,3.098],[1.511,3.238],[2.229,3.360],[0.886,3.839],
                           [2.06,4.55],[1.47,3.25],[0.407,3.11],
                           [1.638,4.521],[1.975,4.318],[2.255,4.561],[1.251,4.337]])

u_v_pts_yellow = np.array([[276.221,181.384],[258.511,389.500],[232.561,619.547],[467.159,613.809],
                           [1083.73,424.367],[895.379,413.835],[954.206,605.061],[701.519,579.580],
                           [1089.46,1182.49],[1182.49,182.604],[1088.05,84.6100],[653.896,18.317],
                           [545.635,121.493],[679.978,165.334],[429.217,212.046],[937.172,392.463],
                           [463.709,662.723],[688.267,170.414],[1095.06,113.097],
                           [630.089,653.402],[503.356,565.489],[390.511,658.939],[787.876,583.085]])

x_y_pts_green = np.array([[0.298,2.953],[0.293,2.616],[0.293,2.258],[0.298,1.861],
                          [1.678,3.346],[1.476,2.953],[1.483,2.520],[1.476,2.071],
                          [1.480,1.473],[1.025,1.613],[0.763,1.365],[0.305,1.473],
                          [0.311,0.870],[0.381,0.330],[0.870,0.292],[1.485,0.293]])

u_v_pts_green = np.array([[156.945,575.043],[287.685,572.474],[426.317,569.007],[574.637,566.397],
                          [12.717,56.711],[157.882,126.035],[321.110,120.672],[489.669,120.481],
                          [705.572,115.882],[665.091,286.877],[759.208,384.069],[724.102,559.380],
                          [952.940,553.920],[1152.210,521.104],[1157.470,336.920],[1150.110,110.872]])

homography_matrix, _ = cv.findHomography(u_v_pts_green,x_y_pts_green)
print(homography_matrix)
matrix_list = homography_matrix.tolist()



with open("matrix.json",'w') as json_file:
    json.dump(matrix_list,json_file)